{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% load static %}
{% block body %}
  <h1>디테일</h1>
  <div class="d-flex container">
    <div style="min-width: 1000px;">

      {% if friend.image %}
        <div class="my-3 p-3 border border-3 bg-light" style="height:300px; background-image:url({{ friend.thumbnail.url }}); background-repeat:no-repeat; background-position:center; background-size:cover;"></div>
      {% else %}
        <div class="my-3 p-3 border border-3 bg-light" style="height:300px; background-image:url(https://cards.image.pokemonkorea.co.kr/data/wmimages/S/SI/SI_171.png); background-repeat:no-repeat; background-position:center; background-size:cover;"></div>
      {% endif %}

      <p style="font-size:30px; font-weight:bold">
        {{ friend.title }}
      </p>
      <div class="rounded-3 border border-5">
        <div class="m-3">
          🗓️
          {{friend.start_at}}~{{friend.end_at}}
        </div>
      </div>
      d-day:{{ Dday }}
      <p>{{ friend.content }}</p>
      <a href="{% url 'friends:update' friend.pk %}">
        <i class="bi bi-pencil"></i>
      </a>
      <a href="{% url 'friends:delete' friend.pk %}">
        <i class="bi bi-trash"></i>
      </a>

      <a href="{% url 'friends:like' friend.pk %}">

        {% if request.user in friend.like_user.all %}
          <i class="bi bi-heart-fill"></i>
        {% else %}
          <i class="bi bi-heart"></i>
        {% endif %}

      </a>

      <p>좋아요 수:{{ friend.like_user.count }}</p>
      {{ friend.created_at }}
      {{ friend.updated_at }}

      <form action="{% url 'friends:comment_create' friend.pk %}" method="post">
        {% csrf_token %}
        {% bootstrap_form comment_form %}
        <button type="submit" class="btn btn-dark">제출</button>
      </form>

      {% for comment in comments %}
        {% if user.profile.image %}
          <img src="{{ user.profile.image.url }}" alt="{{ user.profile.image }}" class="rounded-2 border border-1" width="48px">
        {% else %}
          <img src="https://cards.image.pokemonkorea.co.kr/data/wmimages/S/S11/S11_050.png?w=400" alt="{{ user.profile.image }}" class="rounded-2 border border-1" width="48px">
        {% endif %}

        <span>{{comment.pk}}번 댓글</span>
        {{ comment.user }}
        {{comment.content}}
        <a href="{% url "friends:comment_delete" friend.pk comment.pk %}">삭제</a>
        <br>

      {% endfor %}
    </div>
    <div class="d-flex rounded-3 border border-5" style="width:200px ;height:100px">
      {% if friend.user.profile.image %}
        <img src="{{ friend.user.profile.image.url }}" alt="{{ photospot.user.profile.image }}" class="rounded-circle border border-1 me-2" width="40" height="40">
      {% else %}
        <img src="{% static 'image/no_profile.jpg'%}" alt="" class="rounded-circle border border-1 me-2" width="40" height="40">
      {% endif %}
      <div class="d-flex flex-column">
        <p>{{friend.user.username}}</p>
      </div>

    </div>
  </div>

{% endblock body %}