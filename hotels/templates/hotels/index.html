{% extends 'base.html' %}
{% block body %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
<div class="d-flex flex-column">
  <div class="btn-group" role="group" aria-label="Vertical button group">
    {% for region in regions %}
    <button id="region_btn" type="button" class="btn btn-light">{{ region.name }}</button>
    {% endfor %}
  </div>
  <div class="btn-group" role="group" aria-label="Vertical button group">
    {% for region in regions %}
      {% for detail_region in region.detailregion_set.all %}
      <button id="detail_region_btn" type="button" class="btn btn-light d-none {{ region.name }}">{{ detail_region.name }}</button>
      {% endfor %}
    {% endfor %}
  </div>
</div>

<div>
  <h3>인기 호텔</h3>
  <div>서울 제주 부산 인천 강릉</div>
  <div class="d-flex gap-3">
    {% for hotel in hotels %}
    <div>
      <a href="{% url 'hotels:detail' hotel.pk %}" class="text-decoration-none text-dark">
        <img src="{{ hotel.image }}" class="img-fluid rounded my-3" alt="{{ hotel.name }}">
        <div class="ms-1">
          <h5 class="fw-bold my-1">{{ hotel.name }}</h5>
          <div class="my-1">
            <i class="bi bi-star-fill text-danger"></i>
            <b>{{ hotel.rating }}</b>
          </div>
          <b class="text-danger my-1 fs-5">{{ hotel.price }}~</b>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
</div>

<!-- 지역 버튼 스크립트 -->
<script>
  const FirstRegionBtns = document.querySelector('#region_btn')
  const FirstDetailRegionBtns = document.querySelector('#detail_region_btn')

  FirstRegionBtns.classList.add('active')
  FirstDetailRegionBtns.classList.remove('d-none')

  const RegionBtns = document.querySelectorAll('#region_btn')
  const DetailRegionBtns = document.querySelectorAll('#detail_region_btn')

  RegionBtns.forEach((RegionBtn) => {
    RegionBtn.addEventListener('click', function(e){
      e.preventDefault()
      if (! e.target.classList.contains('active')){
        RegionBtns.forEach(
          (RegionBtn) => {
            RegionBtn.classList.remove('active')
          }
        )
        e.target.classList.add('active')
        DetailRegionBtns.forEach((DetailRegionBtn) => {
          if (! DetailRegionBtn.classList.contains('d-none')){
            DetailRegionBtn.classList.add('d-none')
          }
        })
        DetailRegionBtns.forEach((DetailRegionBtn) => {
          if (DetailRegionBtn.classList.contains(e.target.innerText)){
            DetailRegionBtn.classList.remove('d-none')
          }
        })
      }
    })
  })
</script>

{% endblock body %}